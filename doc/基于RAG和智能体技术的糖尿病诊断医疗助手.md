
基于RAG和智能体技术的糖尿病诊断医疗助手


1.作业要求：

基于《高血压诊疗指南.pdf》、《中国高血压防治指南.pdf》、以及MySQL医疗数据库，构建专家级医疗决策支持智能体，实现临床诊疗全流程决策支持。

【核心功能要求】：

多源数据整合：系统需整合PDF指南、MySQL数据库，实现统一的知识检索和决策支持

专家决策引擎：智能体需具备临床推理能力，能根据患者数据生成个性化诊疗方案

安全风险控制：内置医学伦理和安全校验机制，对高风险操作进行预警

数据说明：

data目录：存放rag需要的文档

db目录存放mysql的建表语句ddl.sql和数据语句data.sql

【建议】：mysql数据库用docker，采用mcp协议

3.作业提交要求：

 1. 每题截图提供jupyter页面和电脑时间戳
 2. 提交完整jupyter代码工程（如果有含Dockerfile）
 3. 邮件主题：姓名+第一次作业 发送至：ggao_song@126.com

4.专家智能体优化版评分标准（总分100分）

4.1.基础数据层建设（25分）

4.1.1. PDF知识库构建（5分） 

提取《高血压诊疗指南.pdf》目录结构及关键表格，截图展示解析结果（2分） 

术语标准化映射：输入"心梗"检索到"心肌梗死"，截图展示映射表（3分）

4.1.2. Excel数据处理（3分） 

解析《糖尿病病例统计.xlsx》中"胰岛素使用率"数据分布，截图展示基础可视化（3分）

说明：

空腹胰岛素和餐后2小时胰岛素中得没有值或者为空说明没有测量，2个都没有，就是没有用胰岛素

这个表格里面得人都是糖尿病人，共有125人

数据分布，简单点，就选性别，男女即可，如果自己想做好点，可以做年龄段、身高、体重，不做更多维度要求

4.1.3. MySQL数据库构建（3分） 

完整执行建表SQL语句，截图展示表结构（1分） 

成功生成测试数据，截图展示至少3个核心表的数据样例（1分） 

设计合理的外键约束和索引优化（1分）

4.1.4. 多模态数据整合（7分） 

实现PDF+Excel+MySQL的统一检索接口，截图展示"高血压急症处理"的跨源检索结果（4分） 

时效性验证：检索2025年7月20日更新的指南文档，截图展示时间过滤功能（3分）

4.1.5. 系统基础功能（5分）

无知识库时显示专业的错误提示，例如输入：骨折怎么治疗，直接显示无此类信息（2分）

有知识库时返回正确信息，例如输入：什么才是高血压，直接给出专业定义（3分）

4.1.6. 系统运维（2分）

《中国高血压防治指南.pdf》新增文档后自动重建索引，截图日志显示更新时间戳（2分）

4.2.专家智能体核心能力（55分）

4.2.1. 临床数据查询与分析（15分） 

患者画像构建：输入患者ID，智能体自动查询MySQL生成完整患者画像（年龄、性别、病史、用药、检查结果），截图展示结构化输出（5分）

风险分层评估：基于查询结果，智能体调用高血压/糖尿病风险评估规则，生成风险等级和随访计划，截图展示评估逻辑（5分）

用药冲突检测：智能体检测患者当前用药是否存在禁忌或相互作用，截图展示预警提示（5分）

4.2.2. 个性化诊疗决策（20分） 

诊断推理能力：输入患者症状和检查数据，智能体生成鉴别诊断列表（至少3个）及概率排序，截图展示推理路径（7分） 

治疗方案生成：基于患者风险分层和指南推荐，生成个性化治疗方案，包含药物选择、剂量调整依据，截图展示（8分） 

动态调整能力：模拟患者治疗2周后效果不佳，智能体重新评估并调整方案，截图展示调整逻辑（5分）

4.2.3. 循证医学支持（10分） 

证据等级标注：所有治疗建议标注证据等级（如ⅠA、ⅡB），截图展示引用的指南出处和更新时间（5分） 

多源知识融合：整合PDF指南推荐、Excel统计数据、MySQL患者数据，生成综合决策建议，截图展示融合过程（5分）

4.2.4. 伦理安全控制（10分） 

高风险预警：当检测到患者为孕妇且建议使用ACEI类药物时，智能体主动警示禁忌风险，截图展示（5分） 

转诊决策：对高血压急症（SBP>180mmHg）患者，智能体明确建议紧急转诊并说明理由，截图展示（5分）

4.3.系统工程能力（20分）

4.3.1. 智能体对话管理（8分） 

结构化问诊：模拟患者主诉"头晕"，智能体按SOAP格式进行结构化问诊，截图展示完整对话流程（4分） 

信息澄清能力：当患者信息模糊时，智能体主动追问关键细节（如血压具体数值、持续时间），截图展示（4分）

4.3.2. 系统健壮性（7分）

异常处理：模拟数据库连接失败，智能体优雅降级并提示用户，截图展示（3分） 

性能优化：对复杂查询（如全院患者风险评估）进行SQL优化，响应时间<3秒，截图展示执行计划对比（4分）

4.3.3. 溯源与可解释性（5分） 

决策溯源：每个诊疗建议标注数据来源（PDF页码、Excel行号、MySQL表名），截图展示高亮标记（3分） 

推理可视化：使用决策树或流程图展示关键诊疗决策路径，截图展示（2分）

4.4.加分项（不计入100分，最高+10分）

跨学科协作：处理合并高血压、糖尿病、冠心病的复杂病例，展示多学科诊疗思维（+3分）

患者教育：生成个性化患者教育材料，适配不同文化程度（+2分）

持续学习：展示指南更新后自动调整诊疗建议的机制（+3分）

临床验证：与真实临床案例对比，展示决策准确性（+2分）

5.测试案例

测试案例1：输入：患者ID=42，

智能体需查询该患者所有数据，发现： 

58岁男性，BMI 28.5 血压168/98mmHg，诊断为2级高血压 

合并2型糖尿病，HbA1c 8.2%

 当前用药：氨氯地平5mg qd 

智能体应输出：联合降压方案+血糖控制建议+3个月随访计划

测试案例2：输入：患者ID=17，

智能体需识别： 

35岁孕妇，血压158/96mmHg 

智能体输出：应禁用ACEI/ARB，推荐甲基多巴或拉贝洛尔 明确建议产科会诊

测试案例3：输入：收缩压190mmHg，头痛呕吐3小时，

智能体应输出： 

识别为高血压急症 

建议立即静脉降压 

要求紧急转诊至急诊科 

展示2023指南相关推荐

6.评分说明：

专家智能体占比55%：体现从基础检索向临床决策支持的转变

循证医学为核心：所有诊疗建议必须基于知识库证据，避免幻觉

安全第一原则：伦理安全评分权重高，确保医疗AI的安全性

临床思维路径：重点考察智能体是否具备专家级的临床推理能力，而非简单信息检索

多模态数据融合：要求智能体能够综合文本、表格、数值等多源数据进行决
